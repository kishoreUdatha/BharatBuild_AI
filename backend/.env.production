# ============================================================
# BharatBuild AI - AWS PRODUCTION CONFIGURATION
# ============================================================
# This file shows the production configuration structure.
# In AWS ECS, these values come from Task Definition environment
# variables and AWS Secrets Manager.
# ============================================================

# ==========================================
# ENVIRONMENT IDENTIFIER
# ==========================================
ENVIRONMENT=production
DEBUG=false

# ==========================================
# APPLICATION SETTINGS
# ==========================================
APP_NAME=BharatBuild AI
# SECRET_KEY is loaded from AWS Secrets Manager
API_VERSION=v1
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
WORKERS=2

# ==========================================
# DATABASE (AWS RDS PostgreSQL)
# ==========================================
# Format: postgresql+asyncpg://user:password@host:5432/database
# In ECS: Set via task definition environment variable
DATABASE_URL=postgresql+asyncpg://bharatbuild_admin:YOUR_PASSWORD@bharatbuild-db.XXXXX.ap-south-1.rds.amazonaws.com:5432/bharatbuild

DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_ECHO=false
RESET_DB=false

# ==========================================
# REDIS (AWS ElastiCache)
# ==========================================
# Format: redis://:password@host:6379/db
# In ECS: Set via task definition environment variable
REDIS_URL=redis://:YOUR_PASSWORD@master.bharatbuild-redis.XXXXX.aps1.cache.amazonaws.com:6379/0
REDIS_CACHE_DB=1

# ==========================================
# CELERY (AWS ElastiCache)
# ==========================================
CELERY_BROKER_URL=redis://:YOUR_PASSWORD@master.bharatbuild-redis.XXXXX.aps1.cache.amazonaws.com:6379/0
CELERY_RESULT_BACKEND=redis://:YOUR_PASSWORD@master.bharatbuild-redis.XXXXX.aps1.cache.amazonaws.com:6379/1

# ==========================================
# CLAUDE AI CONFIGURATION
# ==========================================
# ANTHROPIC_API_KEY is loaded from AWS Secrets Manager
ANTHROPIC_BASE_URL=
USE_MOCK_CLAUDE=false
CLAUDE_HAIKU_MODEL=claude-3-5-haiku-20241022
CLAUDE_SONNET_MODEL=claude-sonnet-4-20250514
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.7
USE_PLAIN_TEXT_RESPONSES=true

# ==========================================
# STORAGE CONFIGURATION (AWS S3)
# ==========================================
STORAGE_MODE=s3
USER_PROJECTS_PATH=/tmp/projects

# S3 Configuration
# In ECS/Fargate: IAM role provides credentials automatically
# Leave AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY empty to use IAM role
USE_MINIO=false
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=ap-south-1
S3_BUCKET=bharatbuild-storage-930030325663

# ==========================================
# AUTHENTICATION
# ==========================================
# JWT_SECRET_KEY is loaded from AWS Secrets Manager
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==========================================
# GOOGLE OAUTH
# ==========================================
# GOOGLE_CLIENT_ID is loaded from AWS Secrets Manager
# GOOGLE_CLIENT_SECRET is loaded from AWS Secrets Manager
GOOGLE_REDIRECT_URI=https://bharatbuild.ai/auth/callback/google

# ==========================================
# FRONTEND URL
# ==========================================
FRONTEND_URL=https://bharatbuild.ai
CORS_ORIGINS=https://bharatbuild.ai,http://bharatbuild-alb-223139118.ap-south-1.elb.amazonaws.com

# ==========================================
# RAZORPAY
# ==========================================
# RAZORPAY_KEY_ID is loaded from AWS Secrets Manager
# RAZORPAY_KEY_SECRET is loaded from AWS Secrets Manager

# ==========================================
# SANDBOX SETTINGS
# ==========================================
SANDBOX_CLEANUP_ENABLED=true
SANDBOX_IDLE_TIMEOUT_MINUTES=30
SANDBOX_CLEANUP_INTERVAL_MINUTES=5
SANDBOX_MIN_AGE_MINUTES=5

# Docker sandbox (ECS sandbox host)
SANDBOX_DOCKER_HOST=tcp://10.0.10.158:2375
SANDBOX_PREVIEW_BASE_URL=http://bharatbuild-alb-223139118.ap-south-1.elb.amazonaws.com/sandbox

# ==========================================
# LOGGING
# ==========================================
LOG_LEVEL=INFO
LOG_FILE=logs/app.log

# ==========================================
# TOKEN SYSTEM
# ==========================================
FREE_TIER_TOKENS=10000
FREE_TIER_MONTHLY_ALLOWANCE=10000
MAX_TOKENS_PER_REQUEST=4096
